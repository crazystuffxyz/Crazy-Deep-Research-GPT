const faviconCache=new Map,failedFaviconDomains=new Set;export async function getFaviconUrl(e){let n;try{n=new URL(e).hostname}catch(e){return null}if(faviconCache.has(n))return faviconCache.get(n);if(failedFaviconDomains.has(n))return null;const a=new URL("/favicon.ico",`https://${n}`).href;try{await fetch(a,{method:"HEAD",mode:"no-cors"});return faviconCache.set(n,a),a}catch(e){}return failedFaviconDomains.add(n),null}export function prependFaviconToElement(e,n,a){if(!e||!n)return;if(e.querySelector(".log-favicon"))return;const o=document.createElement("img");o.src=n,o.alt=`${a} favicon`,o.className="log-favicon h-3.5 w-3.5 mr-1.5 flex-shrink-0",o.style.display="inline-block",o.onerror=()=>{o.style.display="none"},e.insertBefore(o,e.firstChild)}